---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout navbarActiveItemID="home">
  <main class="relative">
    <!-- Sidebar Container (hidden on mobile) -->
    <aside
      id="sidebar"
      class="hidden md:fixed left-4 top-24 bg-black/30 border border-gray-600 font-mono text-sm transition-all duration-300 ease-in-out overflow-hidden"
      style="width: 220px; display: none;"
    >
      <!-- Sidebar Header -->
      <div class="flex items-center justify-between p-4 border-b border-gray-600">
        <span class="text-gray-400 text-lg">Navigation</span>
        <button
          id="closeSidebar"
          class="text-gray-400 hover:text-white transition-colors"
          aria-label="Close sidebar"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Sidebar Content -->
      <nav class="p-4">
        <ul class="space-y-3">
          <li>
            <a
              href="#about"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → About me
            </a>
          </li>
          <li>
            <a
              href="#contact"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → Contact
            </a>
          </li>
          <li>
            <a
              href="#writeups"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → Writeups
            </a>
          </li>
          <li>
            <a
              href="#flags"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → Flags
            </a>
          </li>
          <li>
            <a
              href="https://pwn.college"
              target="_blank"
              rel="noopener noreferrer"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → pwn.college
            </a>
          </li>
          <li>
            <a
              href="https://hackthebox.com"
              target="_blank"
              rel="noopener noreferrer"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → hackthebox
            </a>
          </li>
          <li>
            <a
              href="https://tryhackme.com"
              target="_blank"
              rel="noopener noreferrer"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → tryhackme
            </a>
          </li>
          <li>
            <a
              href="https://overthewire.org"
              target="_blank"
              rel="noopener noreferrer"
              class="block text-gray-400 hover:text-cyan-600 hover:pl-2 transition-all duration-200 text-lg"
            >
              → overthewire
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Collapsed Sidebar Toggle Button (hidden on mobile) -->
    <button
      id="openSidebar"
      class="hidden md:flex fixed left-4 top-24 bg-black/30 border border-gray-600 p-3 items-center justify-center hover:bg-black/50 transition-colors"
      aria-label="Open sidebar"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5 text-gray-400"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"></path>
      </svg>
    </button>

    <!-- Main Content Area -->
    <div id="mainContent" class="max-w-4xl mx-auto px-4 mt-8 transition-all duration-300">
      <!-- About Me Section -->
      <section id="about" class="mb-12">
        <div class="bg-black/30 border border-gray-600 p-6">
          <!-- Terminal header -->
          <div class="flex items-center gap-2 mb-4 pb-3 border-b border-gray-600">
            <div class="flex gap-2">
              <div class="w-3 h-3 rounded-full bg-red-500"></div>
              <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
              <div class="w-3 h-3 rounded-full bg-green-500"></div>
            </div>
            <span class="text-gray-400 text-xs ml-2">vcrid@rootzone ~ $ cat about.txt</span>
          </div>

          <!-- Content -->
          <div class="text-gray-300 space-y-4">
            <div class="flex items-start gap-3">
              <span class="text-cyan-600 text-2xl">></span>
              <div>
                <h2 class="text-cyan-600 text-2xl mb-4">About Me</h2>
                <div class="space-y-3 text-lg leading-relaxed">
                  <p>
                    <span class="text-gray-500">$</span> <span class="text-gray-400">whoami</span>
                  </p>
                  <p class="pl-4">
                    My name is <span class="text-cyan-600">vcrid</span>. I love dabbling with code. I have a crazy calling to hacking and rebuilding stuff.
                  </p>

                  <p class="mt-4">
                    <span class="text-gray-500">$</span> <span class="text-gray-400">cat passion.txt</span>
                  </p>
                  <p class="pl-4">
                    Looking deep into systems has always been my daily driver. I am just starting out - This will change soon as I update this website.
                  </p>

                  <p class="mt-4">
                    <span class="text-gray-500">$</span> <span class="text-gray-400">echo $STATUS</span>
                  </p>
                  <p class="pl-4">
                    I hope as you read this, my level of expertise will be shown accurately. I am to update this section with more stuff about me.
                  </p>

                  <p class="mt-4 text-gray-500 italic">
                    [ More updates coming soon... ]
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-4 pt-3 border-t border-gray-700 text-gray-500 text-sm">
            <span class="text-gray-400">vcrid@rootzone ~ $</span> <span class="animate-pulse">_</span>
          </div>
        </div>
      </section>
    </div>
  </main>
</BaseLayout>

<script>
  const sidebar = document.getElementById("sidebar");
  const openButton = document.getElementById("openSidebar");
  const closeButton = document.getElementById("closeSidebar");
  const mainContent = document.getElementById("mainContent");

  if (openButton && closeButton && sidebar && mainContent) {
    closeButton.addEventListener("click", () => {
      sidebar.style.display = "none";
      openButton.style.display = "flex";
      // Remove left margin when sidebar closes
      mainContent.style.marginLeft = "0";
    });

    openButton.addEventListener("click", () => {
      sidebar.style.display = "block";
      openButton.style.display = "none";

      // RESPONSIVE MARGIN LOGIC
      // Only add margin on smaller screens to prevent overlap
      // On wider screens (>1400px), keep content centered

      const screenWidth = window.innerWidth;

      if (screenWidth < 1400) {
        // For smaller screens: shift content to avoid overlap
        // ADJUST THIS VALUE to control the gap between sidebar and content
        const sidebarWidth = 220;  // Sidebar width
        const leftPosition = 16;    // left-4 = 16px
        const gap = 16;             // Gap between sidebar and content (CHANGE THIS to adjust spacing)

        const totalMargin = sidebarWidth + leftPosition + gap;
        mainContent.style.marginLeft = totalMargin + "px";
      } else {
        // For wider screens: keep content centered (no margin shift)
        mainContent.style.marginLeft = "0";
      }
    });

    // Handle window resize to adjust margin dynamically
    window.addEventListener("resize", () => {
      if (sidebar.style.display === "block") {
        const screenWidth = window.innerWidth;
        if (screenWidth < 1400) {
          const sidebarWidth = 220;
          const leftPosition = 16;
          const gap = 16;  // CHANGE THIS to adjust spacing
          const totalMargin = sidebarWidth + leftPosition + gap;
          mainContent.style.marginLeft = totalMargin + "px";
        } else {
          mainContent.style.marginLeft = "0";
        }
      }
    });
  }
</script>
